<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>Batman1788 点单菜单</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: 'Segoe UI', Arial; background: #f6f8fa; margin: 0; }
    .menu-container { max-width: 600px; margin: 20px auto; background: #fff; border-radius: 14px; box-shadow: 0 1px 8px #ddd; padding: 24px; }
    .menu-card { display: flex; gap: 18px; margin-bottom: 26px; background: #fafbfc; border-radius: 12px; box-shadow: 0 2px 8px #eee; padding: 18px;}
    .menu-card img { width: 100px; height: 100px; border-radius: 12px; object-fit: cover; }
    .menu-info { flex: 1; }
    .menu-name { font-size: 20px; font-weight: bold; margin-bottom: 6px; }
    .menu-tags { margin-bottom: 8px; }
    .tag { display: inline-block; background: #ffdf8d; color: #e29e07; border-radius: 8px; font-size: 12px; padding: 2px 8px; margin-right: 6px; }
    .tag.hot { background: #ff647c; color: #fff; }
    .tag.new { background: #51d67b; color: #fff; }
    .price-row { margin-bottom: 6px; font-size: 15px; }
    .menu-note { color: #888; font-size: 13px; }
    .menu-form { margin-top: 24px; }
  </style>
</head>
<body>
  <div class="menu-container" id="menuList">菜单加载中...</div>
  <script>
    // ====== 你的 Apps Script 输出的菜单 JSON 链接 ======
    const SHEET_API = 'https://script.google.com/macros/s/AKfycbwaNGa3oeMym9_3nli1f_pkBmnJXQocYhIxfRCI_p2bdu48OTTIkASuX7GxVcaz-Pog/exec';

    fetch(SHEET_API)
      .then(res => res.json())
      .then(menu => {
        let html = '';
        menu.forEach(item => {
          // tags高亮支持 hot/new，多个tag以空格分隔
          let tagsHtml = '';
          if (item['标签(tag)']) {
            item['标签(tag)'].split(' ').forEach(tag => {
              let c = '';
              if (tag.toLowerCase() === 'hot') c = 'tag hot';
              else if (tag.toLowerCase() === 'new') c = 'tag new';
              else c = 'tag';
              tagsHtml += `<span class="${c}">${tag}</span>`;
            });
          }
          // 多规格价格
          let priceHtml = '';
          if (item.Q) priceHtml += `<div class="price-row">Q: <b>￥${item.Q}</b></div>`;
          if (item.H) priceHtml += `<div class="price-row">H: <b>￥${item.H}</b></div>`;
          if (item.OZ) priceHtml += `<div class="price-row">OZ: <b>￥${item.OZ}</b></div>`;
          // 上架判断
          if (item['是否上架'] && item['是否上架'].toString().trim().toLowerCase() === 'no') return;
          html += `
            <div class="menu-card">
              <img src="${item.图片_URL || ''}" alt="img" onerror="this.style.display='none'">
              <div class="menu-info">
                <div class="menu-name">${item.名称}</div>
                <div class="menu-tags">${tagsHtml}</div>
                ${priceHtml}
                <div class="menu-note">${item.备注 || ''}</div>
              </div>
            </div>
          `;
        });
        document.getElementById('menuList').innerHTML = html || "暂无上架商品";
      });
  </script>
</body>
</html>
